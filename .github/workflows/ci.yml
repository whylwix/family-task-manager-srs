name: CI - Family Task Manager

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  validate:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Validate project structure
      run: |
        echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞..."
        test -f index.html || (echo "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç index.html" && exit 1)
        test -f style.css || (echo "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç style.css" && exit 1)
        test -f script.js || (echo "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç script.js" && exit 1)
        echo "–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç"
        
    - name: HTML validation
      run: |
        echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ HTML..."
        if grep -q "<!DOCTYPE html>" index.html; then
          echo "DOCTYPE –Ω–∞–π–¥–µ–Ω"
        else
          echo "DOCTYPE –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"
          exit 1
        fi
        
    - name: Check for console errors in JS
      run: |
        echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ JavaScript..."
        if grep -q "addTask" script.js; then
          echo "–§—É–Ω–∫—Ü–∏—è addTask –Ω–∞–π–¥–µ–Ω–∞"
        else
          echo " –§—É–Ω–∫—Ü–∏—è addTask –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
        fi
        
    - name: Success message
      run: |
        echo "üéâ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!"
        echo "üöÄ Family Task Manager –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!"
